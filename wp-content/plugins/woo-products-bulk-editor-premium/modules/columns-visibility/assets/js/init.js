function vgseColumnsVisibilityUpdateHOT(e,n,t,i){var o=jQuery(".modal-columns-visibility form"),s=o.find(".columns-enabled li .js-column-key");!s.length&&window.vgseColumnsVisibilityEnabled&&(s=window.vgseColumnsVisibilityEnabled);var l=jQuery(".save_post_type_settings"),a=o.parents(".remodal").remodal(),u=o.find(".columns-enabled li .fa-refresh").parent(),r=!1;if(u.length){var c=[];u.find(".column-title").each(function(){c.push(jQuery.trim(jQuery(this).text()))});var d=vgse_editor_settings.texts.confirm_column_reload_page.replace("{columns}",c.join(", "));confirm(d)&&(l.prop("checked",!0),r=!0,loading_ajax({estado:!0}))}if(!s.length)return loading_ajax({estado:!1}),"opened"===a.getState()&&a.close(),!1;if("undefined"!=typeof hot){window.vgseColumnsVisibilityEnabled=s,e=e||hot.getSettings().columns,n=n||vgse_editor_settings.colHeaders,t=t||vgse_editor_settings.colWidths;var m=[],v=[],y=[],g=[];e.forEach(function(e,i){e.vgOriginalIndex=i,m[e.data]=e},this);var p=o.find(".not-allowed-columns").val();p=p.replace("ID,","").split(",");var f=[];if(s.each(function(){var e=jQuery(this).val();f.push(e)}),(f=p.concat(f)).forEach(function(e,i){m[e]&&(v.push(m[e]),y.push(n[e]),g.push(t[e]))},this),hot.updateSettings({columns:v,colHeaders:y,colWidths:g}),!l.is(":checked")||"softUpdate"===i)return loading_ajax({estado:!1}),"opened"===a.getState()&&a.close(),!1}var b=o.children("input").serializeArray(),h=o.find(".columns-enabled li input").serializeArray();return finalFormData=b.concat(h),r&&loading_ajax({estado:!0}),jQuery.post(o.attr("action"),finalFormData,function(e){var i=o.data("callback");i&&vgseExecuteFunctionByName(i,window,{response:e,form:o}),r&&window.location.reload()}),r||loading_ajax({estado:!1}),a&&"opened"===a.getState()&&a.close(),!1}function vgseColumnsVisibilityEqualizeHeight(){jQuery("#vgse-columns-enabled,#vgse-columns-disabled").css("height","");var e=jQuery("#vgse-columns-enabled").height(),i=jQuery("#vgse-columns-disabled").height(),n=i<e?e:i;0<n&&jQuery("#vgse-columns-enabled,#vgse-columns-disabled").height(n)}function vgseColumnsVisibilityInit(){if(window.vgseColumnsVisibilityAlreadyInit)return!0;window.vgseColumnsVisibilityAlreadyInit=!0;var i=document.getElementById("vgse-columns-enabled"),n=document.getElementById("vgse-columns-disabled"),t=jQuery(".modal-columns-visibility");if(!i||!n)return!0;function o(){t.find(".columns-enabled li input").each(function(){jQuery(this).attr("name",jQuery(this).attr("name").replace("disallowed_column","column"))}),t.find(".columns-disabled li input").each(function(){jQuery(this).attr("name",jQuery(this).attr("name").replace(/^column/,"disallowed_column"))});var e=t.find(".columns-enabled li .js-column-key").map(function(){return jQuery(this).val()}).get().join(",");t.find(".all-allowed-columns").val(e),window.vgseColumnsVisibilityUsed=!0}vgseColumnsVisibilityEqualizeHeight(),window.enabledSortable=Sortable.create(i,{group:"vgseColumns",animation:100,onSort:function(e){o()}}),window.disabledSortable=Sortable.create(n,{group:{name:"vgseColumns"},animation:100}),jQuery("body").on("click",".modal-columns-visibility .vgse-change-all-states",function(e){e.preventDefault(),"disabled"===jQuery(this).data("to")?(n.innerHTML+=i.innerHTML,i.innerHTML=""):(i.innerHTML+=n.innerHTML,n.innerHTML=""),o()}),jQuery("body").on("submit",".modal-columns-visibility  form",function(e){e.preventDefault(),o();var i=vgseColumnsVisibilityUpdateHOT(null,null,null,"hardUpdate");return"boolean"==typeof i&&i}),jQuery("body").on("click",".modal-columns-visibility  .vgse-restore-removed-columns",function(e){e.preventDefault(),jQuery.post(ajaxurl,{action:"vgse_restore_columns",nonce:jQuery('.modal-columns-visibility input[name="wpsecv_nonce"]').val(),post_type:jQuery('.modal-columns-visibility input[name="wpsecv_post_type"]').val()},function(e){e.success?alert(e.data.message):notification({mensaje:e.data.message,tipo:"error",tiempo:3e4})})}),jQuery("body").on("click",".modal-columns-visibility   .deactivate-column",function(e){if((e.preventDefault(),window.hot)&&beGetModifiedItems().length)return alert(vgse_editor_settings.texts.save_changes_before_remove_column),!0;$column=jQuery(this).parent(),$column.appendTo(".modal-columns-visibility .columns-disabled"),o()}),jQuery("body").on("click",".modal-columns-visibility   .enable-column",function(e){e.preventDefault(),$column=jQuery(this).parent(),$column.appendTo(".modal-columns-visibility .columns-enabled"),o()}),jQuery("body").on("click",".modal-columns-visibility   .remove-column",function(e){if((e.preventDefault(),window.hot)&&beGetModifiedItems().length)return alert(vgse_editor_settings.texts.save_changes_before_remove_column),!0;var i=jQuery(this),n=i.parent().find(".js-column-key").val();return window.lastColumnKeyRemoved=n,i.parent().remove(),jQuery.post(ajaxurl,{action:"vgse_remove_column",nonce:jQuery('.modal-columns-visibility input[name="wpsecv_nonce"]').val(),post_type:jQuery('.modal-columns-visibility input[name="wpsecv_post_type"]').val(),column_key:n},function(e){e.success?o():notification({mensaje:e.data.message,tipo:"error",tiempo:3e4})}),!1}),o()}jQuery(document).on("opened",".modal-columns-visibility",function(){vgseColumnsVisibilityInit(),vgseColumnsVisibilityEqualizeHeight()}),jQuery(window).load(function(){jQuery("body").on("click",".wpse-toggle-head",function(){jQuery(this).next(".wpse-toggle-content").find(".modal-columns-visibility").length&&(vgseColumnsVisibilityEqualizeHeight(),vgseColumnsVisibilityInit())})}),jQuery(document).ready(function(){if("undefined"==typeof hot||!jQuery(".modal-columns-visibility").length)return!0;var e=hot.getSettings().contextMenu;void 0===e.items&&(e.items={}),e.items.wpse_hide_column={name:vgse_editor_settings.texts.hide_column,hidden:function(){if(!hot.getSelected())return!0;var e=hot.colToProp(hot.getSelected()[0][1]),i=vgse_editor_settings.final_spreadsheet_columns_settings[e];return i&&!i.allow_to_hide},callback:function(e,i,n){if(beGetModifiedItems().length)alert(vgse_editor_settings.texts.save_changes_before_remove_column);else{vgseColumnsVisibilityInit();var t=hot.colToProp(i[0].start.col),o=jQuery(".modal-columns-visibility");o.find('.columns-enabled .js-column-key[value="'+t+'"]').parent("li").appendTo(o.find(".columns-disabled")),o.find(".save_post_type_settings").prop("checked",!0),o.find("form").submit(),notification({mensaje:vgse_editor_settings.texts.column_removed,tipo:"success",tiempo:4e4})}}},e.items.wpse_open_columns_visibility={name:vgse_editor_settings.texts.open_columns_visibility,callback:function(e,i,n){jQuery(".modal-columns-visibility").remodal().open()}},hot.updateSettings({contextMenu:e})});