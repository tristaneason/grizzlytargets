jQuery(document).ready(function(){var n=jQuery("#be-filters");if(!n.length)return!0;var e=n.find(".advanced-filters .base");e.removeClass("base"),window.advancedGroupTemplate=e[0].outerHTML,e.remove(),n.on("click",".remove-advanced-filter",function(e){e.preventDefault();var a=jQuery(this).parents("li"),d=a.find(".wpse-advanced-filters-field-selector").attr("name");beAddRowsFilter(d+"="),a.remove()}),n.find(".new-advanced-filter").click(function(e){e.preventDefault();var a=window.advancedGroupTemplate.replace(new RegExp(/\[\]/,"g"),"["+(n.find(".advanced-filters .advanced-filters-list").children().length+1)+"]"),d=n.find(".advanced-filters  .advanced-filters-list .advanced-field").last();d.length?d.after(a):n.find(".advanced-filters  .advanced-filters-list").prepend(a),vgseInitSelect2(n.find(".advanced-filters  .advanced-filters-list .advanced-field select.select2").last()),n.find(".advanced-filters  .advanced-filters-list").children().show()}),n.find(".new-advanced-filter").trigger("click"),n.find(".advanced-filters-toggle").change(function(){jQuery(this).is(":checked")?n.find(".advanced-filters").show():n.find(".advanced-filters").hide()}),jQuery("body").on("change",".wpse-advanced-filters-field-selector",function(){var e=jQuery(this).val(),a=jQuery(this);if(e)a.parent().find("input.field-source").val(a.find("option:selected").data("source")),vgseInputToFormattedColumnField(e,a.parents(".fields-wrap"),".wpse-advanced-filters-value-selector");else{var d=a.attr("name").replace("[key]","[value]");a.parents(".fields-wrap").find(".wpse-advanced-filters-value-selector:gt(0)").remove(),a.parents(".fields-wrap").find(".wpse-advanced-filters-value-selector").replaceWith('<input name="'+d+'" class="wpse-advanced-filters-value-selector" />')}})});